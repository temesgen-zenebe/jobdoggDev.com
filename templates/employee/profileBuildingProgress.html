{% extends 'pages/employee_dashboard.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load user_tags %}
{% block title %}Basic Information List{% endblock %}

{% block dashboard_employee %}
<!-- Code -->
<div class="my-4 py-4" >
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mx-3 mb-4">
        <h4 class="h3 mx-3 mb-0 text-gray-800">Profile Buiding Lookup </h1>
        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                class="fas fa-download fa-sm text-white-50 px-3"></i> Generate Report</a>
    </div>
   <!-- progress bar -->
    <div class="container mt-5">
        <div class="progress my-3" style="height: 25px;">
            <div class="text-dark progress-bar {% if progress_percentage < 25 %}bg-danger{% elif progress_percentage < 50 %}bg-warning{% elif progress_percentage < 75 %}bg-info{% else %}bg-success{% endif %}" role="progressbar" style="width: {{ progress_percentage }}%;" aria-valuenow="{{ progress_percentage }}" aria-valuemin="0" aria-valuemax="100">
              <span class="py-5 fs-6">{{ progress_percentage }}%</span>
            </div>
        </div>  
        <div class="album py-3 bg-light">
            {% if progress %}
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-3">
                {% for progres in progress %}
                <div class="col step-item ">
                    <div class="card border-left-danger shadow h-100 py-2">
                        <div class="card-body">
                    
                        <h6 class="card-text ">
                            <i class="fas fa-shield fa-1x text-gray-300" aria-hidden="true"></i>
                            Policies 
                        </h6>
                        <small class="">Step 1: Accept Policies</small>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if  progres.companyPolices_completed %}
                                <div class="btn-group gap-1">
                                    <button type="button" class="prev-btn  btn btn-sm btn-success">
                                        <i class="bi bi-check2-circle text-light px-1"></i><small>Completed</small>
                                    </button>
                                    <a href="{% url 'employee:policies_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-box-arrow-left"></i></a>
                                </div>
                            {% else %}                       
                                <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#policiesModal">
                                    Accept 
                                </button>
                            {% endif %}
                            
                        </div>
                        
                        </div>
                    </div>
                </div>
                {% if  progres.companyPolices_completed %}
                <div class="col step-item ">
                <div class="card border-left-warning shadow h-100 py-2">
                    <div class="card-body">
                    <h6 class="card-text ">
                        <i class="bi bi-info-circle"></i>
                        Basic Information
                    </h6>
                    <small class="">Step 2: Basic Information</small>
                    <div class="d-flex justify-content-between align-items-center">
                        
                            {% if progres.basic_information_completed %}
                                <div class="btn-group gap-1">
                                    <button type="button" class="prev-btn  btn btn-sm btn-success">
                                        <i class="bi bi-check2-circle text-light px-1"></i>
                                        <small>Completed</small>
                                    </button>
                                    <a href="{% url 'employee:basic_information_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                                   
                                </div>
                            {% else %} 
                                <!-- Basic Information Step -->
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="basicInformationModalButton" data-bs-toggle="modal" data-bs-target="#basicInformationModal">
                                    Create
                                </button>
                            {% endif %}
                        
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.basic_information_completed %}
                <div class="col step-item ">
                    <div class="card border-left-success shadow h-100 py-2">
                        <div class="card-body">
                            
                        <h6 class="card-text text-decoration-bold">
                            <i class="bi bi-person-circle px-1"></i>
                            Personal
                        </h6>
                        <small class="">Step 3: Personal Information</small>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if progres.personal_information_completed %}
                                <div class="btn-group gap-1">
                                    <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                                        <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                                    </button>
                                    <a href="{% url 'employee:personal_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                                    
                                    <!-- Modal Trigger Button -->
                                
                                </div>
                            {% else %}
                                <!-- Personal Step -->
                                <button type="button" class="btn btn btn-sm btn-outline-secondary" id="personalModalButton" data-bs-toggle="modal" data-bs-target="#personalModal">
                                    Create
                                </button> 
                            {% endif %}
                        </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.personal_information_completed %} 
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                        <div class="card-body">
                        <h6 class="card-text">
                            <i class="bi bi-airplane-fill px-1"></i>
                            Military
                        </h6>
                        <small class="">Step 4: Military </small>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if progres.Military_completed  %}
                            <div class="btn-group gap-1">
                                <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                                    <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                                </button>
                               <a href="{% url 'employee:military_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                            </div>
                            {% else %}
                            <div class="btn-group gap-1">
                                <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#militaryModal">
                                    Create
                                </button>
                                <form action="{% url 'employee:skip_military' %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="next-btn btn btn-sm btn-outline-secondary">Skip</button>
                                </form>
                            </div>
                            {% endif %}
                        </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.Military_completed  %}
                <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                    <h6 class="card-text"><i class="fa-solid fa-user-graduate"></i> Education</h6>
                    <small class="">Step 5: Education & upload files</small>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.Education_completed  %}
                        <div class="btn-group gap-1">
                          <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                            <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                          </button>
                          <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#CertificationLicenseModal">
                            <i class="fa-regular fa-square-plus"></i> <i class="fa-solid fa-upload"></i>
                         </button>
                          <a href="" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                        </div>
                        {% else %}
                         <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#educationModal">
                            Create
                         </button>
                        {% endif %}

                    </div>
                    {% if certification_licenses %}
                    <ul class="list-unstyled list-group-flush">
                    {% for certification in certification_licenses %}
                        <li class="list-item"><a href="{{ certification.certification_file.url}}"><i class="bi bi-files px-1"></i><small class="">{{ certification.document_name|truncatewords:2 }}</small></a></li>
                    {% endfor %}
                    </ul>
                    {% endif %}
                   
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.Education_completed   %}
                <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                    <p class="card-text">Experience</p>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.Experience_completed %}
                        <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        {% endif %}
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.Experience_completed %}
                <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                    <p class="card-text">Experience</p>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.Preferences_completed %}
                        <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        {% endif %}
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.Preferences_completed %}
                <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                    <p class="card-text">Preferences</p>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.SkillSetTest_completed %}
                        <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        {% endif %}
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.SkillSetTest_completed %}
                <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                    <p class="card-text">Skillset Test</p>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.VideoResume_completed %}
                        <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        {% endif %}
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.VideoResume_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Skillset Test</p>
                        <div class="d-flex justify-content-between align-items-center">
                        {% if progres.ResumeUploading_completed %}
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        {% endif %}
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Video resume</p>
                        <div class="d-flex justify-content-between align-items-center">
                        {% if progres.ResumeUploading_completed %}
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        {% endif %}
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Resume uploading</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Background Check</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Resume uploading</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Resume uploading</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            {% else %}
            <div class="row row-cols-1 row-cols-sm-8 row-cols-md-10">
                <div class="card mb-4 bg-warning">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">you must stere built your profile</h6>
                    </div>
                    <div class="card-body">
                        <p class="mb-0"> oops its semes like you need start built you profile !!
                            by accepting the policys </p>
                    </div>
                </div>
            </div>
            {% endif %}
            </div>
        </div>
    </div>
    
    <!-- modele -->
    <div class="container">
        <!-- Profile Building Progress content -->
        <!-- profileBuildingProgress.html -->

            <!-- Policies Modal -->
            <div class="modal fade" id="policiesModal" tabindex="-1" aria-labelledby="policiesModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-lg modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="policiesModalLabel">Accept Policies</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                {% if all_policies_accepted %}
                                 <h6 class="m-0 font-weight-bold text-success">To Review all policies Click Read </h6>
                                {% else %}
                                 <h6 class="m-0 font-weight-bold text-primary">Read and accepted for next steps</h6>
                                {% endif %}
                                <div class="dropdown no-arrow">
                                    {% if all_policies_accepted %}               
                                        <a class="btn btn-sm btn-outline-success text-decoration-none" data-bs-toggle="collapse" 
                                            href="#multiCollapseExample2" role="button" aria-expanded="true" aria-controls="multiCollapseExample2">
                                            <i class="bi bi-arrows-fullscreen text-white-600 px-2"></i> Read
                                        </a>
                                    {% else %}
                                        <a class="btn btn-sm btn-outline-primary text-decoration-none" data-bs-toggle="collapse" 
                                            href="#multiCollapseExample1" role="button" aria-expanded="true" aria-controls="multiCollapseExample1">
                                            <i class="bi bi-arrows-fullscreen text-white-600"></i> Start
                                        </a>
                                    {% endif %}
                                </div>
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="multi-collapse collapsing show" id="multiCollapseExample1" style="">
                                                {% if all_policies_accepted %}
                                                <p>All policies have been accepted.</p>
                                                {% else %}
                                                <form id="policy-form"  method="POST"  class="needs-validation was-validated" novalidate="">
                                                    {% csrf_token %}
                                                    <div class="card card-body">
                                                        <div class="accordion accordion-flush" id="accordionFlushExample">
                                                        
                                                                {% for policy in policies %}
                                                                    <div class="accordion-item ">
                                                                        <h2 class="accordion-header" id="flush-heading{{policy.id}}">
                                                                            <button class="accordion-button collapsed text-s" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{policy.id}}" aria-expanded="false" aria-controls="flush-collapse{{policy.id}}">
                                                                                {{ policy.title }} *
                                                                            </button>
                                                                        </h2>
                                                                        <div id="flush-collapse{{policy.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{policy.id}}" data-bs-parent="#accordionFlushExample">
                                                                            <div class="accordion-body " style="overflow: auto; height: 300px;">
                                                                                <div>
                                                                                    <h5 class="card-title">Special title treatment</h5>
                                                                                    <p class="card-text">
                                                                                        {{ policy.description }}
                                                                                    </p>
                                                                                    {% if user.is_authenticated %}
                                                                                        {% if policy.id not in accepted_policies_ids %}
                                                                                        <!--<input type="radio" name="policy_{{ policy.id }}">-->
                                                                                        <div class="col-12">
                                                                                            <div class="form-check">
                                                                                              <input class="form-check-input" name="policy_{{ policy.id }}" type="checkbox" id="invalidCheck{{ policy.id }}" required="">
                                                                                              <label class="form-check-label" for="invalidCheck">
                                                                                                Agree to terms and conditions
                                                                                              </label>
                                                                                              <div class="invalid-feedback">
                                                                                                You must agree before submitting.
                                                                                              </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        {% endif %}
                                                                                            
                                                                                    {% endif %}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                {% endfor %}
                                                            
                                                        </div>
                                                    </div>
                                                    <div class="card-footer">
                                                        <div class="row row-cols-lg-auto g-1 align-items-center border-0 ">
                                                            <div class="col-8 text-start px-1 py-1 border-0">
                                                                <div class="form-check ">
                                                                    <input class="form-check-input" type="checkbox" id="inlineFormCheckMane">
                                                                    <label class="form-check-label" for="inlineFormCheckMane">
                                                                    I Read and Accept all.
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        
                                                            <div class="col-4 text-end  px-1 py-1 border-none">
                                                                <button name="policies" class=" btn btn-sm btn-outline-primary" type="submit">I Accept</button>
                                                            </div>
                                                    </div>
                                                    
                                                </form>
                                                {% endif %}
                                                {% if all_policies_accepted %}
                                                <script>
                                                document.getElementById("policy-form").style.display = "none";
                                                </script>
                                                {% endif %}
                                            </div>
                                        </div>
                                        
                                        <div class="col-12">
                                            <div class="multi-collapse collapsing show" id="multiCollapseExample2" style="">
                                                <div class="card card-body">
                                                    <div class="accordion accordion-flush" id="accordionFlushExample">
                                                        {% if all_policies_accepted %}
                                                            <p>All policies have been accepted.</p>
                                                            {% for policy in policies %}
                                                                <div class="accordion-item ">
                                                                    <h2 class="accordion-header" id="flush-heading{{policy.id}}">
                                                                        <button class="accordion-button collapsed text-s" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{policy.id}}" aria-expanded="false" aria-controls="flush-collapse{{policy.id}}">
                                                                            {{ policy.title }}
                                                                        </button>
                                                                    </h2>
                                                                    <div id="flush-collapse{{policy.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{policy.id}}" data-bs-parent="#accordionFlushExample">
                                                                        <div class="accordion-body " style="overflow: auto; height: 300px;">
                                                                            <div>
                                                                                <h5 class="card-title">Special title treatment</h5>
                                                                                <p class="card-text">
                                                                                    {{ policy.description }}
                                                                                </p>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {% endfor %}
                                                        
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% if all_policies_accepted %}
                                <div class="py-3 d-flex flex-row align-items-center justify-content-between">
                                    <p>All policies have been accepted successfuly, You Can read it whenever you want it, just click read button.</p>
                                    <a class="btn btn-sm btn-outline-success text-decoration-none" href="{% url 'employee:profile_building_progress' %}" role="button" >
                                        Back
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                           
                        </div>
                    </div>
                </div>
                </div>
            </div>
            <!-- Basic Information Modal -->
            <div class="modal fade" id="basicInformationModal" tabindex="-1" aria-labelledby="basicInformationModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-scrollable">
                    <div class="modal-content mx-4">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Basic Information</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <!--Modal content for Basic Information -->
                            <form method="POST">
                                {% csrf_token %}
                                {{ basic_information_form|crispy }}
                                <div class="modal-footer">
                                    <button type="submit" name="basic_information" class="btn btn-sm btn-outline-primary">Save</button>
                                    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="modal">Back</button>
                                </div>
                            </form>
                        
                        </div>
                    </div>
                </div>
            </div>
            <!-- Personal Modal -->
            <div class="modal fade" id="personalModal" tabindex="-1" aria-labelledby="personalModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-scrollable">
                    <div class="modal-content">
                    <!-- Modal content for Personal -->
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Personal Information</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!--Modal content for Basic Information -->
                        <form method="POST">
                            {% csrf_token %}
                            {{ personal_form|crispy }}
                            <div class="modal-footer">
                                <button type="submit"  name="personal"  class="btn btn-sm btn-outline-primary">Save</button>
                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="modal">Back</button>
                            </div>
                        </form>
                    
                    </div>
                    </div>
                </div>
            </div>
            <!--Modal Step 4: Military Information -->
            <div class="modal fade" id="militaryModal" tabindex="-1" aria-labelledby="militaryModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="militaryModalLabel">Military Information</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="POST" enctype="multipart/form-data">   
                                {% csrf_token %}
                                {{ military_form|crispy }}
                                <div class="modal-footer">
                                    <button type="submit" name="military" class="btn btn-sm btn-outline-success">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Education Modal -->
            <div class="modal fade" id="educationModal" tabindex="-1" aria-labelledby="educationModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="educationModalLabel">Education</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="POST" action="{% url 'employee:profile_building_progress' %}">
                                {% csrf_token %}
                                {{ education_form|crispy}}
                                <!-- Include other fields of the EducationForm -->
                                <button type="submit" name="education" class="btn btn-primary">Save</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Education Modal -->
             <div class="modal fade" id="CertificationLicenseModal" tabindex="-1" aria-labelledby="CertificationLicenseModalModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="CertificationLicenseModalModalLabel">Education</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="POST" enctype="multipart/form-data" action="{% url 'employee:profile_building_progress' %}">
                                {% csrf_token %}
                                {{ CertificationLicense_form|crispy}}
                                <!-- Include other fields of the EducationForm -->
                                <button type="submit" name="certificationLicense" class="btn btn-sm btn-outline-success">Save</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
    </div>     

</div>  
{% block scripts %}
    <script>
        $(document).ready(function() {
        // Open Basic Information Modal
        $('#basicInformationModalButton').click(function() {
            $('#basicInformationModal').modal('show');
        });

        // Open Personal Modal
        $('#personalModalButton').click(function() {
            $('#personalModal').modal('show');
        });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const progress = document.querySelector(".progress-bar1");
            const steps = Array.from(document.querySelectorAll(".step-item"));
            const stepCount = steps.length;
            let currentStep = 1;
        
            function updateProgressBar() {
                const percent = (currentStep - 1) / (stepCount - 1) * 100;
                progress.style.width = percent + "%";
                progress.setAttribute("aria-valuenow", percent);
            }
        
            function setActiveStep() {
                steps.forEach((step, index) => {
                if (index === currentStep - 1) {
                    step.classList.add("active");
                } else {
                    step.classList.remove("active");
                }
                });
            }
    
            function goToNextStep() {
                if (currentStep < stepCount) {
                currentStep++;
                updateProgressBar();
                setActiveStep();
                }
            }
        
            function goToPreviousStep() {
                if (currentStep > 1) {
                currentStep--;
                updateProgressBar();
                setActiveStep();
                }
            }
        
            // Event listeners for next and previous buttons
            const nextBtns = document.getElementsByClassName("next-btn");
            const prevBtns = document.getElementsByClassName("prev-btn");
        
            for (let i = 0; i < nextBtns.length; i++) {
                nextBtns[i].addEventListener("click", goToNextStep);
            }
    
        for (let i = 0; i < prevBtns.length; i++) {
            prevBtns[i].addEventListener("click", goToPreviousStep);
        }
    
        updateProgressBar();
        setActiveStep();
        });
    </script>
{% endblock %} 
{% endblock %}
