{% extends 'pages/employee_dashboard.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load user_tags %}
{% block title %}Basic Information List{% endblock %}

{% block dashboard_employee %}
<!-- Code -->
<div class="my-4 py-4" >
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mx-3 mb-3">
        <h4 class="mx-3 mb-0 text-gray-800">Profile Buiding Lookup </h4>
        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                class="fas fa-download fa-sm text-white-50 px-3"></i> Generate Report</a>
    </div>
   <!-- progress bar -->
    <div class="container mt-5">
        <div class="progress my-3 mx-auto" style="height: 20px; width:95%;">
            <div class="shadow text-white progress-bar {% if progress_percentage < 8.33 %}bg-Eminence{% elif progress_percentage < 16.66 %}bg-Indigo{% elif progress_percentage < 24.99 %}bg-Turquoise{% elif progress_percentage < 33.32 %}bg-Plum{% elif progress_percentage < 41.65 %}bg-Crimson{% elif progress_percentage < 49.98 %}bg-Goldenrod{% elif progress_percentage < 58.31 %}bg-Coral{% elif progress_percentage < 66.64 %}bg-Lavender{% elif progress_percentage < 74.97 %}bg-ornge{% elif progress_percentage < 83.3 %}bg-Peru{% elif progress_percentage < 91.63 %}bg-info{% elif progress_percentage < 99.96 %}bg-success{% else %}bg-DarkOliveGreen{% endif %}" role="progressbar" style="width: {{ progress_percentage }}%;" aria-valuenow="{{ progress_percentage }}" aria-valuemin="0" aria-valuemax="100">
                <span class="py-5 fs-6">{{ progress_percentage }} %</span>
              </div>              
        </div>  
        <div class="album py-3 bg-light">
            {% if progress %}
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4">
                {% for progres in progress %}
                {% if  progres.account_created %}
                <!--Accept Policies-->
                <div class="col step-item ">
                    <div class="card border-left-Eminence shadow h-100 py-2">
                        <div class="card-body">
                    
                        <h6 class="card-text ">
                            <i class="fas fa-shield fa-1x text-gray-500" aria-hidden="true"></i>
                            Policies 
                        </h6>
                        <small class="">Step 1: Accept Policies</small>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if  progres.companyPolices_completed %}
                                <div class="btn-group gap-1">
                                    <button type="button" class="prev-btn  btn btn-sm btn-success ">
                                        <i class="bi bi-check2-circle text-light px-1"></i><small>Completed</small>
                                    </button>
                                    <a href="{% url 'employee:policies_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-box-arrow-left"></i></a>
                                </div>
                            {% else %}                       
                                <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#policiesModal">
                                    Accept 
                                </button>
                            {% endif %}
                            
                        </div>
                        
                        </div>
                    </div>
                </div>
                {% endif %}
                <!--Basic Information-->
                {% if  progres.companyPolices_completed %}
                <div class="col step-item ">
                <div class="card border-left-Turquoise shadow h-100 py-2">
                    <div class="card-body">
                    <h6 class="card-text ">
                        <i class="bi bi-info-circle"></i>
                        Basic Information
                    </h6>
                    <small class="">Step 2: Basic Information</small>
                    <div class="d-flex justify-content-between align-items-center">
                        
                            {% if progres.basic_information_completed %}
                                <div class="btn-group gap-1">
                                    <button type="button" class="prev-btn  btn btn-sm btn-success">
                                        <i class="bi bi-check2-circle text-light px-1"></i>
                                        <small>Completed</small>
                                    </button>
                                    <a href="{% url 'employee:basic_information_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                                   
                                </div>
                            {% else %} 
                                <!-- Basic Information Step -->
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="basicInformationModalButton" data-bs-toggle="modal" data-bs-target="#basicInformationModal">
                                    Create
                                </button>
                            {% endif %}
                        
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                <!--Personal-->
                {% if progres.basic_information_completed %}
                <div class="col step-item ">
                    <div class="card border-left-Plum shadow h-100 py-2">
                        <div class="card-body">
                            
                        <h6 class="card-text text-decoration-bold">
                            <i class="bi bi-person-circle px-1"></i>
                            Personal
                        </h6>
                        <small class="">Step 3: Personal Information</small>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if progres.personal_information_completed %}
                                <div class="btn-group gap-1">
                                    <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                                        <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                                    </button>
                                    <a href="{% url 'employee:personal_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>

                                </div>
                            {% else %}
                                <!-- Personal Step -->
                                <button type="button" class="btn btn btn-sm btn-outline-secondary" id="personalModalButton" data-bs-toggle="modal" data-bs-target="#personalModal">
                                    Create
                                </button> 
                            {% endif %}
                        </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                <!--Military-->
                {% if progres.personal_information_completed %} 
                <div class="col step-item ">
                    <div class="card border-left-Crimson shadow h-100 py-2">
                        <div class="card-body">
                        <h6 class="card-text">
                            <i class="bi bi-airplane-fill px-1"></i>
                            Military
                        </h6>
                        <small class="">Step 4: Military </small>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if progres.Military_completed  %}
                            <div class="btn-group gap-1">
                                <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                                    <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                                </button>
                               <a href="{% url 'employee:military_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                            </div>
                            {% else %}
                            <div class="btn-group gap-1">
                                <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#militaryModal">
                                    Create
                                </button>
                                <form action="{% url 'employee:skip_military' %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="next-btn btn btn-sm btn-outline-secondary">Skip</button>
                                </form>
                            </div>
                            {% endif %}
                        </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                <!--Education-->
                {% if progres.Military_completed  %}
                <div class="col step-item ">
                 <div class="card border-left-Goldenrod shadow h-100 pt-1">
                    <div class="card-body">
                    <h6 class="card-text"><i class="fa-solid fa-user-graduate"></i> Education</h6>
                    <small class="">Step 5: Education & upload files</small>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.Education_completed  %}
                        <div class="btn-group gap-1">
                          <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                            <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                          </button>
                          <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#CertificationLicenseModal">
                            <i class="fa-regular fa-square-plus"></i> <i class="fa-solid fa-upload"></i>
                         </button>
                          <a class="btn btn-sm btn-outline-secondary" href="{% url 'employee:education_list' %}"><i class="bi bi-pen"></i></a>
                        </div>
                        {% else %}
                         <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#educationModal">
                            Create
                         </button>
                        {% endif %}

                    </div>
                    {% if certification_licenses %}
                    <ul class="list-unstyled list-group-flush">
                    {% for certification in certification_licenses|slice:":2" %}
                        <li class="list-item"><small class=""><a href="{{ certification.certification_file.url}}"><i class="bi bi-files px-1"></i>{{ certification.document_name|truncatewords:2 }}</a></small></li>
                    {% endfor %}
                    </ul>
                    {% endif %}
                   
                    </div>
                 </div>
                </div>
                {% endif %}
                <!--Experience-->
                {% if progres.Education_completed %}
                <div class="col step-item ">
                <div class="card border-left-Coral shadow h-100 py-2">
                    <div class="card-body">
                    <h6 class="card-text"><i class="fa-sharp fa-solid fa-trophy"></i>  Experience</h6>
                    <small class="">Step 6: Experience </small>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.Experience_completed %}
                        <div class="btn-group gap-1">
                            <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                                <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                            </button>
                           <a href="{% url 'employee:experience_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                        </div>
                        {% else %}
                        <div class="btn-group gap-1">
                            <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#experienceFormModal">
                                Create
                            </button>
                            <form action="{% url 'employee:no_Experience' %}" method="post">
                                {% csrf_token %}
                                <button type="submit" class="next-btn btn btn-sm btn-outline-secondary">No experience</button>
                            </form>
                        </div>
                        {% endif %}
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                <!--Preferences-->
                {% if progres.Experience_completed %}
                <div class="col step-item">
                <div class="card border-left-Lavender shadow h-100 py-2">
                    <div class="card-body">
                        <h6 class="card-text"><i class="fa-solid fa-asterisk px-1"></i>Preferences</h6>
                        <small class="">Step 7: Preferences </small>
                        <div class="d-flex justify-content-between align-items-center">
                            
                            {% if progres.Preferences_completed %}
                            <div class="btn-group gap-1">
                                <button type="button" class="prev-btn  btn btn-sm btn-success shadow">
                                    <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                                </button>
                                <a href="{% url 'employee:employee-preferences-list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                            
                            </div>
                            {% else %}
                                <!-- Personal Step -->
                                <div class="btn-group">
                                    <button type="button"  class="btn btn btn-sm btn-outline-secondary mt-3" data-bs-toggle="modal" data-bs-target="#preferencesModal">
                                        Create
                                    </button>
                                </div>
                            
                            {% endif %}
                        </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.Preferences_completed %}
                <div class="col step-item ">
                <div class="card border-left-ornge shadow h-100 py-2">
                    <div class="card-body">
                    
                        <h6 class="card-text"><i class="bi bi-award-fill px-1"></i>SkillSetTest</h6>
                        <small class="">Step 8: SkillSet Test </small>
                        <div class="d-flex justify-content-between align-items-center">
                            
                            {% if progres.SkillSetTest_completed or progres.Skipped_completed or progres.OnProgressSkillTest_completed %}
                            <div class="btn-group gap-1">
                                {% if progres.SkillSetTest_completed  %}
                                <button type="button" class="prev-btn btn btn-sm btn-success shadow" id="completed">
                                    <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                                </button>
                                {% elif progres.OnProgressSkillTest_completed %}
                                <button type="button" class="prev-btn btn btn-sm btn-warning shadow" id="OnPrecess">
                                    <i class="bi bi-check2-circle px-1"></i><small>OnProgress!</small>
                                </button>
                                {% elif progres.Skipped_completed %}
                                <button type="button" class="prev-btn btn btn-sm btn-danger shadow" id="Onpanding">
                                    <i class="bi bi-check2-circle px-1"></i><small>Onpanding!</small>
                                </button>
                               
                                {% else %}

                                {% endif %}
                               
                                <button  type="button"  class="prev-btn btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#SkillSetTestModal">
                                    <i class="bi bi-pen"></i>
                                </button>
                            </div>
                            {% else %}
                            <!-- Personal Step -->
                            <div class="btn-group gap-1">
                                <button type="button" id="SkillSetTestStart" class="btn btn btn-sm btn-outline-secondary SkillSetTestStart" data-bs-toggle="modal" data-bs-target="#SkillSetTestModal">Start</button>
                                <button type="button" id="SkipTest" class="btn btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#SkipForNowtModal">Skip</button>
                            </div>
                            {% endif %}
                    
                        </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.SkillSetTest_completed or progres.Skipped_completed or progres.OnProgressSkillTest_completed %}
                <div class="col step-item ">
                <div class="card border-left-Peru shadow h-100 py-2">
                    <div class="card-body">
                    <h6 class="card-text"><i class="bi bi-cone-striped px-1 fs-5"></i>Safety Video</h6>
                    <small class="">Step 9: Safety Video & Test </small>
                    <div class="d-flex justify-content-between align-items-center">
                        {% if progres.Safety_Video_and_Test_completed %}
                        <div class="btn-group">
                            <button type="button" class="prev-btn btn btn-sm btn-success shadow" id="completed">
                                <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                            </button>
                            <a href="" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-stars"></i></a>
                        </div>
                        {% else %}
                        <div class="btn-group">
                        <a class="prev-btn  btn btn-sm btn-outline-secondary" data-bs-toggle="modal" href="#SafetyVideoModalToggle" role="button">
                            <i class="bi bi-film fs-6 px-1"></i><i class="bi bi-play-circle"></i>
                        </a>
                        </div>
                        {% endif %}
                    </div>
                    </div>
                </div>
                </div>
                {% endif %}
                {% if progres.Safety_Video_and_Test_completed %}
                <div class="col step-item ">
                    <div class="card border-left-info shadow h-100 py-2">
                    <div class="card-body">
                        
                        <h6 class="card-text"><i class="bi bi-camera-video-fill fs-6 px-2"></i>Video Resume</h6>
                        <small class="">Step 10: Video Resume </small>
                        <div class="d-flex justify-content-between align-items-center">
                        {% if progres.VideoResume_completed %}
                        <div class="btn-group">
                            <button type="button" class="prev-btn btn btn-sm btn-success shadow" id="completed">
                                <i class="bi bi-check2-circle px-1"></i><small>Completed!</small>
                            </button>
                            <a href="" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-stars"></i></a>
                        </div>
                        {% else %}
                        <div class="btn-group">
                            
                        <a class="prev-btn  btn btn-sm btn-outline-secondary" data-bs-toggle="modal" href="#VideoResumeModalToggle" role="button">
                            <i class="bi bi-film fs-6 px-1"></i><i class="bi bi-play-circle"></i>
                        </a>
                        </div>
                        {% endif %}
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-success shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Video resume</p>
                        <div class="d-flex justify-content-between align-items-center">
                        {% if progres.ResumeUploading_completed %}
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        {% endif %}
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Resume uploading</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Background Check</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Resume uploading</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% if progres.ResumeUploading_completed %}
                <div class="col step-item ">
                    <div class="card border-left-primary shadow h-100 py-2">
                    <div class="card-body">
                        <p class="card-text">Resume uploading</p>
                        <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            {% else %}
            <div class="row row-cols-1 row-cols-sm-8 row-cols-md-10">
                <div class="card mb-4 bg-warning">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">you must stere built your profile</h6>
                    </div>
                    <div class="card-body">
                        <p class="mb-0"> oops its semes like you need start built you profile !!
                            by accepting the policys </p>
                    </div>
                </div>
            </div>
            {% endif %}
            </div>
        </div>
    </div>
    
    <!-- modele -->
    <div class="container">
        
        <!-- profileBuildingProgress.html -->

            <!-- Policies Modal -->
            <div class="modal fade" id="policiesModal" tabindex="-1" aria-labelledby="policiesModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-lg modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="policiesModalLabel">Accept Policies</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                {% if all_policies_accepted %}
                                 <h6 class="m-0 font-weight-bold text-success">To Review all policies Click Read </h6>
                                {% else %}
                                 <h6 class="m-0 font-weight-bold text-primary">Read and accepted for next steps</h6>
                                {% endif %}
                                <div class="dropdown no-arrow">
                                    {% if all_policies_accepted %}               
                                        <a class="btn btn-sm btn-outline-success text-decoration-none" data-bs-toggle="collapse" 
                                            href="#multiCollapseExample2" role="button" aria-expanded="true" aria-controls="multiCollapseExample2">
                                            <i class="bi bi-arrows-fullscreen text-white-600 px-2"></i> Read
                                        </a>
                                    {% else %}
                                        <a class="btn btn-sm btn-outline-primary text-decoration-none" data-bs-toggle="collapse" 
                                            href="#multiCollapseExample1" role="button" aria-expanded="true" aria-controls="multiCollapseExample1">
                                            <i class="bi bi-arrows-fullscreen text-white-600"></i> Start
                                        </a>
                                    {% endif %}
                                </div>
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="multi-collapse collapsing show" id="multiCollapseExample1" style="">
                                                {% if all_policies_accepted %}
                                                <p>All policies have been accepted.</p>
                                                {% else %}
                                                <form id="policy-form"  method="POST"  class="needs-validation was-validated" novalidate="">
                                                    {% csrf_token %}
                                                    <div class="card card-body">
                                                        <div class="accordion accordion-flush" id="accordionFlushExample">
                                                        
                                                                {% for policy in policies %}
                                                                    <div class="accordion-item ">
                                                                        <h2 class="accordion-header" id="flush-heading{{policy.id}}">
                                                                            <button class="accordion-button collapsed text-s" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{policy.id}}" aria-expanded="false" aria-controls="flush-collapse{{policy.id}}">
                                                                                {{ policy.title }} *
                                                                            </button>
                                                                        </h2>
                                                                        <div id="flush-collapse{{policy.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{policy.id}}" data-bs-parent="#accordionFlushExample">
                                                                            <div class="accordion-body " style="overflow: auto; height: 300px;">
                                                                                <div>
                                                                                    <h5 class="card-title">Special title treatment</h5>
                                                                                    <p class="card-text">
                                                                                        {{ policy.description }}
                                                                                    </p>
                                                                                    {% if user.is_authenticated %}
                                                                                        {% if policy.id not in accepted_policies_ids %}
                                                                                        <!--<input type="radio" name="policy_{{ policy.id }}">-->
                                                                                        <div class="col-12">
                                                                                            <div class="form-check">
                                                                                              <input class="form-check-input" name="policy_{{ policy.id }}" type="checkbox" id="invalidCheck{{ policy.id }}" required="">
                                                                                              <label class="form-check-label" for="invalidCheck">
                                                                                                Agree to terms and conditions
                                                                                              </label>
                                                                                              <div class="invalid-feedback">
                                                                                                You must agree before submitting.
                                                                                              </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        {% endif %}
                                                                                            
                                                                                    {% endif %}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                {% endfor %}
                                                            
                                                        </div>
                                                    </div>
                                                    <div class="card-footer">
                                                        <div class="row row-cols-lg-auto g-1 align-items-center border-0 ">
                                                            <div class="col-8 text-start px-1 py-1 border-0">
                                                                <div class="form-check ">
                                                                    <input class="form-check-input" type="checkbox" id="inlineFormCheckMane">
                                                                    <label class="form-check-label" for="inlineFormCheckMane">
                                                                    I Read and Accept all.
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        
                                                            <div class="col-4 text-end  px-1 py-1 border-none">
                                                                <button name="policies" class=" btn btn-sm btn-outline-primary" type="submit">I Accept</button>
                                                            </div>
                                                    </div>
                                                    
                                                </form>
                                                {% endif %}
                                                {% if all_policies_accepted %}
                                                <script>
                                                document.getElementById("policy-form").style.display = "none";
                                                </script>
                                                {% endif %}
                                            </div>
                                        </div>
                                        
                                        <div class="col-12">
                                            <div class="multi-collapse collapsing show" id="multiCollapseExample2" style="">
                                                <div class="card card-body">
                                                    <div class="accordion accordion-flush" id="accordionFlushExample">
                                                        {% if all_policies_accepted %}
                                                            <p>All policies have been accepted.</p>
                                                            {% for policy in policies %}
                                                                <div class="accordion-item ">
                                                                    <h2 class="accordion-header" id="flush-heading{{policy.id}}">
                                                                        <button class="accordion-button collapsed text-s" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{policy.id}}" aria-expanded="false" aria-controls="flush-collapse{{policy.id}}">
                                                                            {{ policy.title }}
                                                                        </button>
                                                                    </h2>
                                                                    <div id="flush-collapse{{policy.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{policy.id}}" data-bs-parent="#accordionFlushExample">
                                                                        <div class="accordion-body " style="overflow: auto; height: 300px;">
                                                                            <div>
                                                                                <h5 class="card-title">Special title treatment</h5>
                                                                                <p class="card-text">
                                                                                    {{ policy.description }}
                                                                                </p>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {% endfor %}
                                                        
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% if all_policies_accepted %}
                                <div class="py-3 d-flex flex-row align-items-center justify-content-between">
                                    <p>All policies have been accepted successfuly, You Can read it whenever you want it, just click read button.</p>
                                    <a class="btn btn-sm btn-outline-success text-decoration-none" href="{% url 'employee:profile_building_progress' %}" role="button" >
                                        Back
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                           
                        </div>
                    </div>
                </div>
                </div>
            </div>
            <!-- Basic Information Modal -->
            <div class="modal fade" id="basicInformationModal" tabindex="-1" aria-labelledby="basicInformationModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-md modal-dialog-scrollable">
                    <div class="modal-content mx-4">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Basic Information</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <!--Modal content for Basic Information -->
                            <form method="POST">
                                {% csrf_token %}
                                {{ basic_information_form|crispy }}
                                <div class="modal-footer">
                                    <button type="submit" name="basic_information" class="btn btn-sm btn-outline-primary">Save</button>
                                    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="modal">Back</button>
                                </div>
                            </form>
                        
                        </div>
                    </div>
                </div>
            </div>
            <!-- Personal Modal -->
            <div class="modal fade" id="personalModal" tabindex="-1" aria-labelledby="personalModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-md modal-dialog-scrollable">
                    <div class="modal-content">
                    <!-- Modal content for Personal -->
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Personal Information</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!--Modal content for Basic Information -->
                        <form method="POST">
                            {% csrf_token %}
                            {{ personal_form|crispy }}
                            <div class="modal-footer">
                                <button type="submit"  name="personal"  class="btn btn-sm btn-outline-primary">Save</button>
                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="modal">Back</button>
                            </div>
                        </form>
                    
                    </div>
                    </div>
                </div>
            </div>
            <!--Modal Step 4: Military Information -->
            <div class="modal fade" id="militaryModal" tabindex="-1" aria-labelledby="militaryModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-md modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="militaryModalLabel">Military Information</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="POST" enctype="multipart/form-data">   
                                {% csrf_token %}
                                {{ military_form|crispy }}
                                <div class="modal-footer">
                                    <button type="submit" name="military" class="btn btn-sm btn-outline-success">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Education Modal -->
            <div class="modal fade" id="educationModal" tabindex="-1" aria-labelledby="educationModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-md modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="educationModalLabel">Education</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="POST" action="{% url 'employee:profile_building_progress' %}">
                                {% csrf_token %}
                                {{ education_form|crispy}}
                                <!-- Include other fields of the EducationForm -->
                                <button type="submit" name="education" class="btn btn-primary">Save</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Education Modal -->
            <div class="modal fade" id="CertificationLicenseModal" tabindex="-1" aria-labelledby="CertificationLicenseModalModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="CertificationLicenseModalModalLabel">Education</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="POST" enctype="multipart/form-data" action="{% url 'employee:profile_building_progress' %}">
                                {% csrf_token %}
                                {{ CertificationLicense_form|crispy}}
                                <!-- Include other fields of the EducationForm -->
                                <button type="submit" name="certificationLicense" class="btn btn-sm btn-outline-success">Save</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
             <!--Modal Step 6: experience Form Modal-->
            <div class="modal fade" id="experienceFormModal" tabindex="-1" aria-labelledby="experienceFormModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-md modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="experienceFormModalLabel">Experience Information</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="POST" enctype="multipart/form-data">   
                                {% csrf_token %}
                                {{ experienceForm_form|crispy }}
                                <div class="modal-footer">
                                    <button type="submit" name="experience" class="btn btn-sm btn-outline-success">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Step 7:  Employee Preferences Modal -->
            <div class="modal fade" id="preferencesModal" tabindex="-1" aria-labelledby="preferencesModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h6 class="modal-title" id="preferencesModalLabel">Employee Preferences</h6>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body mx-2" >
                            <!-- Employee Preferences Section -->
                            <form method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                {{ employee_preferences_form|crispy }}
                                <button name="preferences" value="save" type="submit" class="btn btn-primary">Save</button>
                            </form><!--
                            <form method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-3">
                                    <div class="col" id="div_id_minimum_salary">
                                        <label for="id_minimum_salary" class="form-label requiredField">Minimum salary<span class="asteriskField">*</span></label>
                                        <input type="number" name="minimum_salary" min="1.00" step="0.01" class="numberinput form-control form-control-sm" required="" id="id_minimum_salary">
                                    </div>
                                    <div class="col" id="div_id_salary_type">
                                        <label for="id_salary_type" class="form-label requiredField">Salary type<span class="asteriskField">*</span></label>
                                        <select name="salary_type" class="select form-select form-select-sm" required="" id="id_salary_type" aria-label="salary type">
                                            <option value="" selected="">---------</option>
                                            <option value="annual">Annual Salary</option>
                                            <option value="monthly">Monthly Salary</option>
                                            <option value="twoWeeks">Two Weeks Salary</option>
                                            <option value="weekly">Weekly Salary</option>
                                            <option value="daily">Daily Rate</option>
                                            <option value="hourly">Hourly Wage</option>
                                            <option value="commission">Commission</option>
                                            <option value="bonus">Bonus</option>
                                            <option value="profit_sharing">Profit Sharing</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col" id="div_id_location">
                                        <label for="id_location" class="form-label requiredField">Location<span class="asteriskField">*</span></label>
                                        <input type="text" name="location" maxlength="100" class="textinput form-control form-control-sm" required="" id="id_location">
                                    </div>
                                    <div class="col" id="div_id_can_relocation">
                                        <label for="id_can_relocation" class="form-label requiredField">Relocation?<span class="asteriskField">*</span></label>
                                        <select name="can_relocation" class="select form-select form-select-sm" required="" id="id_can_relocation">
                                            <option value="" selected="">---</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                                    <div class="col" id="div_id_job_type">
                                        <label for="id_job_type" class="form-label requiredField">Job type<span class="asteriskField">*</span></label>
                                        <select name="job_type" class="select form-select form-select-sm" required="" id="id_job_type">
                                            <option value="" selected="">---------</option>
                                            <option value="full-time">Full-time</option>
                                            <option value="part-time">Part-time</option>
                                            <option value="contract">Contract/Freelance</option>
                                            <option value="internship">Internship</option>
                                            <option value="apprenticeship">Apprenticeship</option>
                                            <option value="remote">Remote/Telecommute</option>
                                            <option value="shift-based">Shift-based</option>
                                            <option value="volunteer">Volunteer</option>
                                            <option value="consultant">Consultant</option>
                                            <option value="permanent">Permanent</option>
                                            <option value="temporary">Temporary</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col" id="div_id_years_of_experience">
                                        <label for="id_years_of_experience" class="form-label requiredField">Years of experience<span class="asteriskField">*</span></label>
                                        <input type="number" name="years_of_experience" step="0.01" class="numberinput form-control form-control-sm" required="" id="id_years_of_experience">
                                    </div>
                                    <div class="col" id="div_id_category">
                                        <label for="id_category" class="form-label requiredField">Category<span class="asteriskField">*</span></label>
                                        <select name="category" class="form-control form-select-sm select form-select" id="id_category" required="">
                                            <option value="" selected="">---------</option>
                                            <option value="1">accounting &amp; finance</option>
                                        </select>
                                    </div>
                                    <div class="col" id="div_id_desired_positions">
                                        <label for="id_desired_positions" class="form-label requiredField">Desired positions<span class="asteriskField">*</span></label>
                                        <select name="desired_positions" class="form-control select form-select-sm form-select" id="id_desired_positions" required="">
                                            <option value="" selected="">---------</option>
                                        </select>
                                    </div>
                                    <div class="col" id="div_id_skills">
                                        <div id="div_id_custom_positions">
                                            <label for="id_skills" class="form-label requiredField">Skills<span class="asteriskField">*</span></label>
                                            <select name="skills" size="2" aria-label="size 3" class="form-control selectmultiple form-select form-select-sm" id="id_skills" required="" multiple=""></select>
                                        </div>
                                    </div>
                                    <div class="col d-flex gap-2">
                                        <div id="div_id_custom_positions">
                                            <label for="id_custom_positions" class="form-label">Positions</label>
                                            <input type="text" name="custom_positions" maxlength="200" class="textinput form-control form-control-sm" id="id_custom_positions">
                                        </div>
                                        <div id="div_id_custom_skills" class="mb-3">
                                            <label for="id_custom_skills" class="form-label">Skills</label>
                                            <textarea name="custom_skills" cols="40" rows="1" class="textarea form-control form-control-sm" id="id_custom_skills"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <button name="preferences" value="save" type="submit" class="btn btn-sm btn-outline-primary my-3">Save</button>
                            </form>-->
                            
                        </div> 
                    </div>
                </div>
            </div>

           <!-- Add a container to hold the popover content -->
          
            <div class="container">
                <div id="popover-content" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center">
                    <h6>Congratulations!</h6> 
                    <button type="button" class="btn btn-sm btn-secondary"  onclick="hidePopover()"></button><i class="bi bi-x"></i>
                </div>
                    <p>A pending status indicates that you have completed the skills test and updated your results. Our dedicated teams will review and confirm your status within one hour. 
                        Once updated, employers will be able to see your profile.
                    </p>
                    
                </div>
            </div>
            <!-- Modal Step 8:  Employee Skill Set Test Modal -->
            <div class="modal fade" id="SkillSetTestModal" tabindex="-1" aria-labelledby="SkillSetTestModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title px-2 " id="SkillSetTestModalLabel"><i class="fas fa-palette fontColor-orang px-2"></i> Your Skill Set Test lookup</h5>
                            <div class="btn-group gap-1">
                                <a class="btn btn-sm btn-outline-secondary" href="{% url 'employee:skillsettestresult-list' %}" ><i class="bi bi-three-dots"></i></a>
                                <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle"></i></button>
                            </div>
                        </div>
                        <div class="modal-body ">
                            <!-- Example Code -->
                            <div class="position-relative mb-4">
                                <img src="{% static 'images/banner-skilltest.png'%}" width="100%" height="40%" class="img-fluid" alt="banner">
                                
                            </div>
                            <div class="table-responsive">
                                <table class="table ">
                                    <thead>
                                        <tr>
                                        <th scope="col">No.</th>
                                        <th scope="col">Position</th>
                                        <th scope="col">SkillsTast</th>
                                        <th scope="col">States</th>
                                        <th scope="col">Result</th>
                                        <th scope="col">Start</th>
                                        <th scope="col">Finshed</th>
                                        <th scope="col">Action</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% if testList %}
                                            {% for position_list in testList %}
                                            <tr>
                                            <th scope="row">{{ forloop.counter }}</th>
                                            <td>{{position_list.position}}</td>
                                            <td>{% if progress %}
                                                    {% for progres in progress %}
                                                        {% if progres.Skipped_completed or progres.OnProgressSkillTest_completed %}
                                                        <a class="btn btn-sm btn-outline-success" href="{{position_list.skill_test}}"target="_blank">Start</a>
                                                        {% elif progres.SkillSetTest_completed  %}
                                                        <a class="btn btn-sm btn-outline-success" href="{{position_list.skill_test}}"target="_blank">Retake</a>
                                                        {% endif %}
                                                    {% endfor %}
                                                {% endif %}
                                            </td>
                                            {% if position_list.states == 'success' %}
                                                <td><span class="badge rounded-pill text-bg-success px-2"> {{position_list.states}}
                                                     <i class="bi bi-check2-circle px-1"></i></span></td>
                                            {% elif position_list.states == 'started' %}
                                              <td>{{position_list.states}} </td>
                                            {% elif position_list.states == 'skipped' %}
                                              <td>{{position_list.states}} </td>
                                            {% elif position_list.states == 'pending' %}
                                                <td>{{position_list.states}}
                                                    <!-- Add a button that triggers the popover -->
                                                    <a data-bs-toggle="popover" data-bs-placement="top" data-bs-content="Popover content">
                                                        <i class="bi bi-info-circle px-1 fontColor-blue"></i>
                                                    </a>
                                                </td>
                                            {% else %}
                                            <td>{{position_list.states}} </td>
                                            {% endif %}
                                            <td>{{position_list.result|floatformat:0 }}%</td>
                                            <td>{{position_list.created|date:"F j, Y"}}</td>
                                            <td>{{position_list.updated|date:"F j, Y"}}</td>
                                            <td><a class="btn btn-sm btn-outline-warning"
                                                href="{% url 'employee:skillsettestresult-update' slug=position_list.slug %}"><i class="bi bi-pencil-square"></i></a></td>
                                            </tr>
                                            {% endfor %}
                                        {% endif %}
                                    </tbody>
                                </table>
                             
                            </div>
                            
                            <div class="bd-callout bd-callout-info">
                                
                                <h6>Notce:</h6>
                                <hr>
                                      <ul class="list-unstyled list-group-flush ">
                                        <li >
                                          <i class="bi bi-info-circle "></i> <small>You are not supposed to take more than two skill tests.</small>
                                        </li>
                                        <li>
                                          <i class="bi bi-info-circle"></i> <small> Your test results from skill tests will not be shared with anyone other than the respective employers.</small>
                                        </li>
                                        <li>
                                          <i class="bi bi-info-circle"></i> <small>You can retake one skill test multiple times to aim for improved results.</small>
                                        </li>
                                        <li>
                                          <i class="bi bi-info-circle"></i> <small> The objectives of skill tests are to elevate you as the best candidate in the eyes of employers.</small>
                                        </li>
                                      </ul>
                                   
                            </div>
                        </div> 
                    </div>
                </div>
            </div>

             <!-- Modal Step 8:  Employee Skill Set Skip Modal -->
            <div class="modal fade" id="SkipForNowtModal" tabindex="-1" aria-labelledby="SkipForNowtModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg ">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="SkipForNowtModalLabel">You Must Know befor you skip the Skill test </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="alert alert-warning" role="alert">
                                <h5 class="alert-heading">Warning !</h5>
                                <p>Skipping the SkillSet test will mark your status as "Pending" 
                                    for the employer's review, impacting your chances of getting
                                     the desired job assignment. Act now to complete this crucial
                                      step and secure better opportunities. Don't miss out on your 
                                      preferred job assignment. Take the SkillSet test promptly to 
                                      maximize your chances of success.
                                </p>
                                <hr>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                        <label class="form-check-label" for="flexCheckDefault">
                                            Acknowledged the warning, currently skipping the test. Will complete the SkillSet test soon.
                                        </label>
                                    </div>
                                    <div id="skillsTestSkipButton" class="d-none ">
                                        <form action="{% url 'employee:SkipSkillSetTestView' %}" method="POST">
                                            {% csrf_token %}
                                            <button type="submit" class="btn btn-sm btn-outline-warning">Skip</button>
                                        </form>
                                    </div>
                                </div>
                                
                              </div>
                            <div class="d-grid gap-2 col-6 mx-auto">
                                <button id="SkillSetTestModal" type="button"  class="SkillSetTestStart next-btn btn btn-sm btn-outline-success align-center" data-bs-toggle="modal" data-bs-target="#SkillSetTestModal">
                                    Start SkillSet Test
                                </button>
                               
                            </div>
                        </div> 
                    </div>
                </div>
            </div>

            <!-- Employee Safety Video & Test Modal --> 
            <div class="modal fade" id="SafetyVideoModalToggle" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="SafetyVideoModalToggleleLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-scrollable">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="SafetyVideoModalToggleleLabel">Safety Video</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            {% if safetyVideo %}
                                {% for video in safetyVideo %}
                                <!-- Area Chart -->
                                <div class="col-xl-9 col-lg-7">
                                    
                                    <div class="card shadow mb-4">
                                        <!-- Card Header - Dropdown -->
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 class="m-0 font-weight-bold text-primary">{{video.title}}</h6>

                                        </div>
                                        <!-- Card Body -->
                                        <div class="card-body">
                                            <div class="">
                                            
                                                {% if video.video_url %}
                                            
                                                <div class="ratio" style="--bs-aspect-ratio: 50%;">
                                                    
                                                    <iframe width="800" height="400" src="{{ video.video_url }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                                                </div>
                                                {% else %}
                                                    <img class="img-fluid rounded mb-4 mb-lg-0" src="https://dummyimage.com/900x400/dee2e6/6c757d.jpg" alt="{{ video.title}}" />
                                                {% endif %}
                                        
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                        
                                <!-- Pie Chart -->
                                <div class="col-xl-3 col-lg-5">
                                    <div class="card shadow mb-4">
                                        <!-- Card Header - Dropdown -->
                                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                            <h6 class="m-0 font-weight-bold text-primary">Objectives</h6>
                                        
                                        </div>
                                        <!-- Card Body -->
                                        <div class="card-body">
                                            <div class="">
                                                <p class="s1-font">{{video.description}}</p>
                                                <hr>
                                                <p class="s1-font">The reason you take the safety quiz is to ensure your knowledge and understanding of workplace safety measures,
                                                     promoting a safe environment for yourself and others.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            {% else %}
                                <div class="card shadow mb-4">
                                    <!-- Card Header - Dropdown -->
                                    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                        <h6 class="m-0 font-weight-bold text-primary">Earnings Overview</h6>

                                    </div>
                                    <!-- Card Body -->
                                    <div class="card-body">
                                        <div class="">
                                        <p>opps Something rong try agin sorry!!</P
                                       
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="modal-footer">
                      <button class="btn brn-sm btn-outline-success" data-bs-target="#SafetyVideoModalToggle2" data-bs-toggle="modal">Take Test about Safety Vide</button>
                    </div>
                  </div>
                </div>
            </div>
            <!--SafetyVideo-->
            <div class="modal fade" id="SafetyVideoModalToggle2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="SafetyVideoModalToggleLabel2" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-scrollable">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="SafetyVideoModalToggleLabel2">Safety Video Test</h1>
                      <a class="btn btn-sm btn-outline-secondary align-end" href="{% url 'employee:profile_building_progress' %}"><i class="bi bi-x"></i></a>
                      
                    </div>
                   
                    <div class="modal-body">
                        <div class="container d-block" id="fromResultCalculator">
                            <div class="p-3 m-0 border-0 bd-example d-none" id="resultNotPass">
                                <!-- Example Code -->
                                <div class="alert alert-warning alert-dismissible fade show" role="alert">
                                  <strong>OPPS! You Not pass For now </strong> You need to Retake the test until you pass.
                                   passing mark is 80% and more but your test result show: <span id="result"></span>Try agin and GoodLack!!
                                 
                                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" id="RefreshForm"></button>
                                  
                                </div>
                                <!-- End Example Code -->
                            </div>
                            <form method="POST" id="safety-test-form" action="{% url 'employee:profile_building_progress' %}">

                              {% csrf_token %}
                              <div class="mb-3">
                                <label for="q1">1. The main goal of occupational safety is:</label>
                                <select class="form-select form-select-sm" id="q1" name="q1" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Protection</option>
                                  <option value="b">Prevention</option>
                                  <option value="c">All of the above.</option>
                                  <option value="d">None of the above</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q2">2. Managers and employers must work together to keep workspaces from becoming a:</label>
                                <select class="form-select form-select-sm" id="q2" name="q2" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Safety Risk.</option>
                                  <option value="b">Socializing area</option>
                                  <option value="c">Disaster</option>
                                  <option value="d">None of the above</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q3">3. True or False<br> Osha, by law, does not require employers to provide safe working conditions:</label>
                                <select class="form-select form-select-sm" id="q3" name="q3" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">True</option>
                                  <option value="b">False.</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q4">4. What does OSHA stand for:</label>
                                <select class="form-select form-select-sm" id="q4" name="q4" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Occupational Safety and Health Awards</option>
                                  <option value="b">Occupational Safety and Health Administration.</option>
                                  <option value="c">Operational Safety and Health Administration</option>
                                  <option value="d">Occupational Safety and Help Administration</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q5">5. Safety is not only the responsibility of the employer but:</label>
                                <select class="form-select form-select-sm" id="q5" name="q5" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Family</option>
                                  <option value="b">Dog</option>
                                  <option value="c">You.</option>
                                  <option value="d">Supervisor</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q6">6. Safety is the condition of not being protected or the prevention from or unlikely to cause danger, risk, or injury:</label>
                                <select class="form-select form-select-sm" id="q6" name="q6" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">True</option>
                                  <option value="b">False.</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q7">7. Accidents are unexpected, unplanned, and may cause injury to you and others around you:</label>
                                <select class="form-select form-select-sm" id="q7" name="q7" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">True.</option>
                                  <option value="b">False</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q8">8. What does PPE stand for:</label>
                                <select class="form-select form-select-sm" id="q8" name="q8" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Personal Paper Evaluation</option>
                                  <option value="b">Personal Personal Equipment</option>
                                  <option value="c">Personal Protective Equipment.</option>
                                  <option value="d">Personal Prevention Equipment</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q9">9. Injury is defined as a harmful condition on the body caused by an accident:</label>
                                <select class="form-select form-select-sm" id="q9" name="q9" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">True.</option>
                                  <option value="b">False</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q10">10. What is an example of equipment that can protect you from hazardous conditions:</label>
                                <select class="form-select form-select-sm" id="q10" name="q10" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Gloves</option>
                                  <option value="b">Hard hat accessories</option>
                                  <option value="c">Disposable Respiratory Protection.</option>
                                  <option value="d">Chemical Resistant Clothing and Accessories</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q11">11. If you injure yourself or cause an accident you should immediately:</label>
                                <select class="form-select form-select-sm" id="q11" name="q11" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Finish the task for the day then report the incident.</option>
                                  <option value="b">Finish the task and notify your peers to report it on your behalf.</option>
                                  <option value="c">End the task and report it to your immediate supervisor or manager..</option>
                                  <option value="d">Ignore the injury or accident.</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q12">12. Please be sure to __________________and use your knees instead of bending at your waist when lifting heavy or small objects:</label>
                                <select class="form-select form-select-sm" id="q12" name="q12" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Jump</option>
                                  <option value="b">Crawl</option>
                                  <option value="c">Stretch</option>
                                  <option value="d">Squat.</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q13">13. _______________ at work are utilized to maximize attentiveness by providing rest and stress reduction:</label>
                                <select class="form-select form-select-sm" id="q13" name="q13" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Breaks.</option>
                                  <option value="b">Sleep</option>
                                  <option value="c">Exercises</option>
                                  <option value="d">Meditation</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q14">14. Staying in your designated work area allows you to be familiar with your surroundings and the rules of conduct pertaining to that particular workspace:</label>
                                <select class="form-select form-select-sm" id="q14" name="q14" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">True.</option>
                                  <option value="b">False</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q15">15. Remaining alert and attentive to your surroundings limits________________and allows you to remain focused on your tasks:</label>
                                <select class="form-select form-select-sm" id="q15" name="q15" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Illnesses</option>
                                  <option value="b">Distraction.</option>
                                  <option value="c">Confusion</option>
                                  <option value="d">Traction</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q16">16. All employees must take the initiative to keep all exits and walkways clear, including ensuring that emergency exits are not blocked:</label>
                                <select class="form-select form-select-sm" id="q16" name="q16" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">True.</option>
                                  <option value="b">False</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q17">17. The responsibility for fire prevention belongs to:</label>
                                <select class="form-select form-select-sm" id="q17" name="q17" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">The Supervisor</option>
                                  <option value="b">The Manager</option>
                                  <option value="c">The Fire Department</option>
                                  <option value="d">Everyone.</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q18">18. An employee that spots a risk in the workplace should:</label>
                                <select class="form-select form-select-sm" id="q18" name="q18" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">Report it to their supervisor/safety and compliance officer.</option>
                                  <option value="b">Ignore the risk</option>
                                  <option value="c">Make it safe before management sees it</option>
                                  <option value="d">All of the above</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q19">19. All risks must be identified and controlled before starting a job:</label>
                                <select class="form-select form-select-sm" id="q19" name="q19" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>Open this select the correct answer</option>
                                  <option value="a">True.</option>
                                  <option value="b">False</option>
                                </select>
                              </div>
                              <div class="mb-3">
                                <label for="q20">20. If you need assistance while performing a job, please:</label>
                                <select class="form-select form-select-sm" id="q20" name="q20" aria-label="Select the correct answer" required>
                                  <option selected disabled value=''>select the correct answer</option>
                                  <option value="a">Ask for help.</option>
                                  <option value="b">Keep performing to the best of your ability</option>
                                  <option value="c">Take a break</option>
                                  <option value="d">None of the above</option>
                                </select>
                              </div>
                              <div class="modal-footer">
                                <button name="safetyVideoTesting" type="submit" class="btn btn-sm btn-outline-primary">Submit</button>
                              </div>
                            </form>
                           
                        </div>
                        <div class="container d-none" id="fromResultSubmit">
                            <form method="POST" enctype="multipart/form-data">
                                
                                {% csrf_token %}
                                {{ safetyVideo_form|crispy }}
                              
                              <div class="modal-footer">
                                <button name="safetyVideoTesting" type="submit" class="btn btn-sm btn-outline-success">Continue</button>
                              </div>
                            </form>
                            <hr>
                            <div class="bd-callout bd-callout-info mt-3">
                                <h5 id="conveying-meaning-to-assistive-technologies">Congratulations! </h5>
                                <p>Result: you <span id="userResult" > </span> with <span id="userScore" > </span> % ; You successfully passed the safety test; 
                                    To continue to the next step click continue button.</p>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
            </div>  
            <!--Create Video Resume-->
            <div class="modal fade" id="VideoResumeModalToggle" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="VideoResumeModalToggleLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                    <h1 class="modal-title fs-5" id="VideoResumeModalToggleLabel">
                        Create Video Resume
                    </h1>
                    <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                    ></button>
                    </div>
                    <div class="modal-body">
                    <h5 class="modal-title fs-6">
                        Share With Us One Fascinating fact About Yourself.
                    </h5>
                    <div class="form-floating">
                        <textarea
                        class="form-control"
                        placeholder="Leave a comment here"
                        id="floatingTextarea"
                        ></textarea>
                        <label for="floatingTextarea">Comments</label>
                    </div>
                    <div class="bd-callout bd-callout-info">
                        <h5 class="modal-title fs-6">
                        Tip how you Recording your video Resume
                        </h5>
                        <hr />
                        <ul class="list-group list-group-flush">
                        <li class="list-group-item list-group-item-info">
                            1. Begin with a captivating introduction to grab the viewer's
                            attention immediately.
                        </li>
                        <li class="list-group-item list-group-item-info">
                            2. Clearly articulate your skills and experiences,
                            highlighting your unique strengths and achievements.
                        </li>
                        <li class="list-group-item list-group-item-info">
                            3. Keep your video resume concise and to the point, focusing
                            on the most relevant information.
                        </li>
                        <li class="list-group-item list-group-item-info">
                            4. Use a professional and well-lit setting with good audio
                            quality to enhance your presentation.
                        </li>
                        <li class="list-group-item list-group-item-info">
                            5. Practice and rehearse your video resume to ensure a
                            confident and engaging delivery.
                        </li>
                        <li class="list-group-item list-group-item-info text-center">
                            <button
                            class="btn btn-sm btn-outline-info"
                            data-bs-target="#exampleModalToggle4"
                            data-bs-toggle="modal"
                            >
                            Learn more
                            </button>
                        </li>
                        </ul>
                    </div>
                    </div>
                    <div class="modal-footer">
                    <button
                        class="btn btn-sm btn-outline-primary"
                        data-bs-target="#exampleModalToggle2"
                        data-bs-toggle="modal"
                    >
                        Upload Video
                    </button>
                    <button
                        class="btn btn-sm btn-outline-primary"
                        data-bs-target="#exampleModalToggle3"
                        data-bs-toggle="modal"
                    >
                        Recording Video
                    </button>
                    </div>
                </div>
                </div>
            </div>
            <!--Create Video Resume Upload Video-->
            <div class="modal fade" id="exampleModalToggle2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="VideoResumeModalToggleLabel2"aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                    <h1 class="modal-title fs-5" id="VideoResumeModalToggleLabel2">
                        Upload Video
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                    Hide this modal and show the first with the button below.
                    </div>
                    <div class="modal-footer">
                    <button class="btn btn-primary" data-bs-target="#VideoResumeModalToggle" data-bs-toggle="modal">
                        Back to first
                    </button>
                    </div>
                </div>
                </div>
            </div>
            <!--Create Video Resume Recording Video-->
            <div class="modal fade" id="exampleModalToggle3" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalToggleLabel3"aria-hidden="true">
                <div class="modal-dialog modal-lg  modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalToggleLabel2">
                        Recording Video
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    ></button>
                    </div>
                    <div class="modal-body">
                     Hide this modal and show the first with the button below.
                    </div>
                    <div class="modal-footer">
                    <button class="btn btn-primary" data-bs-target="#VideoResumeModalToggle" data-bs-toggle="modal" >
                        Back to first
                    </button>
                    </div>
                </div>
                </div>
            </div>
            <!--Create Video Resume Tip how you Recording your video Resume-->
            <div class="modal fade" id="exampleModalToggle4" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalToggleLabel4"aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalToggleLabel4">
                        Tip how you Recording your video Resume
                    </h1>
                    </div>
                    <div class="modal-body">
                    Tip how you Recording your video Resume video
                    </div>
                    <div class="modal-footer">
                    <button class="btn btn-sm btn-outline-primary" data-bs-target="#VideoResumeModalToggle" data-bs-toggle="modal">
                        Back to first
                    </button>
                    <a class="prev-btn  btn btn-sm btn-outline-secondary" data-bs-toggle="modal" href="#VideoResumeModalToggle" role="button">
                        <i class="bi bi-film fs-6 px-1"></i><i class="bi bi-play-circle"></i>
                    </a>
                    </div>
                </div>
                </div>
            </div>
          
    </div>     

</div>  
{% block scripts %}
    <script>
        $(document).ready(function() {
        // Open Basic Information Modal
        $('#basicInformationModalButton').click(function() {
            $('#basicInformationModal').modal('show');
        });

        // Open Personal Modal
        $('#personalModalButton').click(function() {
            $('#personalModal').modal('show');
        });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const progress = document.querySelector(".progress-bar1");
            const steps = Array.from(document.querySelectorAll(".step-item"));
            const stepCount = steps.length;
            let currentStep = 1;
        
            function updateProgressBar() {
                const percent = (currentStep - 1) / (stepCount - 1) * 100;
                progress.style.width = percent + "%";
                progress.setAttribute("aria-valuenow", percent);
            }
        
            function setActiveStep() {
                steps.forEach((step, index) => {
                if (index === currentStep - 1) {
                    step.classList.add("active");
                } else {
                    step.classList.remove("active");
                }
                });
            }
    
            function goToNextStep() {
                if (currentStep < stepCount) {
                currentStep++;
                updateProgressBar();
                setActiveStep();
                }
            }
        
            function goToPreviousStep() {
                if (currentStep > 1) {
                currentStep--;
                updateProgressBar();
                setActiveStep();
                }
            }
        
            // Event listeners for next and previous buttons
            const nextBtns = document.getElementsByClassName("next-btn");
            const prevBtns = document.getElementsByClassName("prev-btn");
        
            for (let i = 0; i < nextBtns.length; i++) {
                nextBtns[i].addEventListener("click", goToNextStep);
            }
    
        for (let i = 0; i < prevBtns.length; i++) {
            prevBtns[i].addEventListener("click", goToPreviousStep);
        }
    
        updateProgressBar();
        setActiveStep();
        });
    </script> 
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var checkbox = document.getElementById('flexCheckDefault');
            var skipButton = document.getElementById('skillsTestSkipButton');
        
            checkbox.addEventListener('change', function() {
                if (checkbox.checked) {
                    skipButton.classList.add('d-block');
                } else {
                    skipButton.classList.remove('d-block');
                    skipButton.classList.add('d-none');
                }
            });
        });
        
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            var modal = document.getElementById('SkillSetTestModal');
            var closeButton = modal.querySelector('.btn-close');
            // Add event listener to both the close button and the modal itself
            var refreshPage = function() {
                // Refresh the page
                window.location.href = "{% url 'employee:profile_building_progress' %}";
                window.location.href = url;
            };
            $('.SkillSetTestStart').on('click', function(event) {
                event.preventDefault(); // Prevent the default behavior of the link
                var url = $(this).attr('href'); // Retrieve the URL from the href attribute
    
                // Perform AJAX request to execute the server-side code
                $.ajax({
                    url: '{% url 'employee:OnProgressSetTest' %}',
                    type: 'POST',
                    dataType: 'json',
                    beforeSend: function(xhr) {
                        xhr.setRequestHeader('X-CSRFToken', getCookie('csrftoken'));
                    },
                    success: function(response) {
                        // Display success message or perform any other actions
                        console.log(response.message);
    
                        // Redirect to the URL after the AJAX request is complete
                       
                        refreshPage();
                    },
                    error: function(xhr, textStatus, errorThrown) {
                        console.log('Error occurred during the AJAX request: ' + errorThrown);
                    }
                });
            });
    
            closeButton.addEventListener('click', function() {
                refreshPage();
            });
            modal.addEventListener('hidden.bs.modal', function() {
                refreshPage();
            });
    
            // Function to retrieve the value of a cookie by name
            function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script type="text/javascript" src="{% static 'js/safetyTestFormscript.js' %}"></script>
{% endblock %} 
{% endblock %}
