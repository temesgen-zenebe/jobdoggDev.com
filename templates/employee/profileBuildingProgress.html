{% extends 'pages/employee_dashboard.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load user_tags %}
{% block title %}Basic Information List{% endblock %}

{% block dashboard_employee %}
<!-- Code -->
<div class="my-4 py-4" >
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mx-3 mb-4">
        <h4 class="h3 mx-3 mb-0 text-gray-800">Profile Buiding Lookup </h1>
        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                class="fas fa-download fa-sm text-white-50 px-3"></i> Generate Report</a>
    </div>
   <!-- progress bar -->
    <div class="container mt-5">
      <div class="progress ">
        <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="progress ">
        <div class="progress-bar bg-success" role="progressbar" style="width: {{ progress_percentage }}%;" aria-valuenow="{{ progress_percentage }}" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      
      <div class="album py-3 bg-light">
          <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-3">
            {% for progres in progress %}
            <div class="col step-item ">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    
                  <p class="card-text font-weight-bold">
                    <i class="fas fa-shield fa-1x text-gray-300" aria-hidden="true"></i>
                    Policies 
                  </p>
                  
                  <div class="d-flex justify-content-between align-items-center">
                  
                        {% if  progres.companyPolices_completed %}
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-success"><small>Completed</small>
                                <i class="bi bi-check2-circle text-light "></i>
                            </button>
                            <a href="{% url 'employee:policies_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-box-arrow-left"></i></a>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next </button>
                        </div>
                        {% else %}
                        <a type="button" href="" class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@getbootstrap">Accept</a>
                        {% endif %}
                    

                  </div>
                </div>
              </div>
            </div>
            {% if  progres.companyPolices_completed %}
            <div class="col step-item ">
              <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text ">
                    <i class="bi bi-info-circle"></i>
                    Basic Information
                  </p>
                  <div class="d-flex justify-content-between align-items-center">
                    
                        {% if progres.basic_information_completed %}
                            <div class="btn-group ">
                                <button type="button" class="prev-btn  btn btn-sm btn-success"><small>Completed</small>
                                    <i class="bi bi-check2-circle text-light"></i>
                                </button>
                                <a href="{% url 'employee:basic_information_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pen"></i></a>
                                <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                            </div>
                        {% else %} 
                            <!-- Basic Information Step -->
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="basicInformationModalButton" data-bs-toggle="modal" data-bs-target="#basicInformationModal">
                            Create
                            </button>
                        {% endif %}
                    
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.basic_information_completed %}
            <div class="col step-item ">
              <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text">Personal</p>
                  <div class="d-flex justify-content-between align-items-center">
                    {% if progres.personal_information_completed %}
                        <div class="btn-group">
                            <button type="button" class="prev-btn  btn btn-sm btn-success shadow"><small>Completed!</small>
                                <i class="bi bi-check2-circle text-light"></i>
                            </button>
                            <a href="{% url 'employee:personal_list' %}" type="button" class="prev-btn  btn btn-sm btn-outline-secondary"><i class="bi bi-pencil-square"></i></a>
                            <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                        </div>
                    {% else %}
                        <!-- Personal Step -->
                        <button type="button" class="btn btn btn-sm btn-outline-secondary" id="personalModalButton" data-bs-toggle="modal" data-bs-target="#personalModal">
                            Create
                        </button>
                        
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.personal_information_completed %} 
            <div class="col step-item ">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text">Military</p>
                  <div class="d-flex justify-content-between align-items-center">
                    {% if progres.Military_completed  %}
                    <div class="btn-group">
                      <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                      <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                      <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Skip</button>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.Military_completed  %}
            <div class="col step-item ">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text">Education</p>
                  <div class="d-flex justify-content-between align-items-center">
                    {% if progres.Education_completed  %}
                    <div class="btn-group">
                      <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                      <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.Education_completed   %}
            <div class="col step-item ">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text">Experience</p>
                  <div class="d-flex justify-content-between align-items-center">
                    {% if progres.Experience_completed %}
                    <div class="btn-group">
                      <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                      <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.Experience_completed %}
            <div class="col step-item ">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text">Experience</p>
                  <div class="d-flex justify-content-between align-items-center">
                    {% if progres.Preferences_completed %}
                    <div class="btn-group">
                      <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                      <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.Preferences_completed %}
            <div class="col step-item ">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text">Preferences</p>
                  <div class="d-flex justify-content-between align-items-center">
                    {% if progres.SkillSetTest_completed %}
                    <div class="btn-group">
                      <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                      <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.SkillSetTest_completed %}
            <div class="col step-item ">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <p class="card-text">Skillset Test</p>
                  <div class="d-flex justify-content-between align-items-center">
                    {% if progres.VideoResume_completed %}
                    <div class="btn-group">
                      <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                      <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            {% if progres.VideoResume_completed %}
            <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <p class="card-text">Skillset Test</p>
                    <div class="d-flex justify-content-between align-items-center">
                     {% if progres.ResumeUploading_completed %}
                      <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                      </div>
                      {% endif %}
                    </div>
                  </div>
                </div>
            </div>
            {% endif %}
            {% if progres.ResumeUploading_completed %}
            <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <p class="card-text">Video resume</p>
                    <div class="d-flex justify-content-between align-items-center">
                    {% if progres.ResumeUploading_completed %}
                      <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                      </div>
                    {% endif %}
                    </div>
                  </div>
                </div>
            </div>
            {% endif %}
            {% if progres.ResumeUploading_completed %}
            <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <p class="card-text">Resume uploading</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            {% endif %}
            {% if progres.ResumeUploading_completed %}
            <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <p class="card-text">Background Check</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            {% endif %}
            {% if progres.ResumeUploading_completed %}
            <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <p class="card-text">Resume uploading</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            {% endif %}
            {% if progres.ResumeUploading_completed %}
            <div class="col step-item ">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <p class="card-text">Resume uploading</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="prev-btn  btn btn-sm btn-outline-secondary">Previous</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Save</button>
                        <button type="button" class="next-btn btn btn-sm btn-outline-secondary">Next</button>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
      
    </div>
    
    <!-- modele -->
    <div class="container">
        <!-- Profile Building Progress content -->
        
        <!-- Basic Information Modal -->
        <div class="modal fade" id="basicInformationModal" tabindex="-1" aria-labelledby="basicInformationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md modal-dialog-scrollable">
            <div class="modal-content mx-4">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Basic Information</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!--Modal content for Basic Information -->
                    <form method="post" action="{% url 'employee:profile_building_progress' %}">
                        {% csrf_token %}
                        {{ basic_information_form|crispy }}
                        
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-sm btn-outline-primary">Submit</button>
                            <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="modal">Back</button>
                        </div>
                    </form>
                   
                </div>
               
             
            </div>
        </div>
        </div>

        <!-- Personal Modal -->
        <div class="modal fade" id="personalModal" tabindex="-1" aria-labelledby="personalModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
            <!-- Modal content for Personal -->
            <!-- ... -->
            </div>
        </div>
        </div>
    </div>     

</div>  
{% block scripts %}
    <script>
        $(document).ready(function() {
        // Open Basic Information Modal
        $('#basicInformationModalButton').click(function() {
            $('#basicInformationModal').modal('show');
        });

        // Open Personal Modal
        $('#personalModalButton').click(function() {
            $('#personalModal').modal('show');
        });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const progress = document.querySelector(".progress-bar");
            const steps = Array.from(document.querySelectorAll(".step-item"));
            const stepCount = steps.length;
            let currentStep = 1;
        
            function updateProgressBar() {
                const percent = (currentStep - 1) / (stepCount - 1) * 100;
                progress.style.width = percent + "%";
                progress.setAttribute("aria-valuenow", percent);
            }
        
            function setActiveStep() {
                steps.forEach((step, index) => {
                if (index === currentStep - 1) {
                    step.classList.add("active");
                } else {
                    step.classList.remove("active");
                }
                });
            }
    
            function goToNextStep() {
                if (currentStep < stepCount) {
                currentStep++;
                updateProgressBar();
                setActiveStep();
                }
            }
        
            function goToPreviousStep() {
                if (currentStep > 1) {
                currentStep--;
                updateProgressBar();
                setActiveStep();
                }
            }
        
            // Event listeners for next and previous buttons
            const nextBtns = document.getElementsByClassName("next-btn");
            const prevBtns = document.getElementsByClassName("prev-btn");
        
            for (let i = 0; i < nextBtns.length; i++) {
                nextBtns[i].addEventListener("click", goToNextStep);
            }
    
        for (let i = 0; i < prevBtns.length; i++) {
            prevBtns[i].addEventListener("click", goToPreviousStep);
        }
    
        updateProgressBar();
        setActiveStep();
        });
    </script>
{% endblock %} 
{% endblock %}
