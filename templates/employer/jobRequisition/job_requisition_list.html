{% extends 'pages/employer_dashboard.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load user_tags %}
{% block title %}Job Requisitions List{% endblock %}
{% block dashboard_employer %}
<div class="container">
  {% if job_requisitions %}
  <div class="mb-4">
    <ul class="nav nav-tabs mb-4">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#tab-all">All</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#tab-save">Save</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#tab-alert">Alert</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#tab-post">Post</a>
      </li>
    </ul>
    
    <div class="tab-content">
      <div class="tab-pane fade show active" id="tab-all">
        <!-- Content for ALL tab -->
        <div class="row g-1">
          {% for jobrequisition in job_requisitions %}
            {% if jobrequisition.preference_action %}
              <div class="col-md-4 py-2">
                <div class="card border-left-JobdoggOrnge shadow h-100">
                  <div class="card-header">
                    {% for position in jobrequisition.job_title.all %}
                      {{ position.position }}
                    {% endfor %}
                  </div>
                  <div class="card-body">
                    <a href="{% url 'employer:job_requisition_detail' jobrequisition.slug %}" class="btn btn-sm btn-outline-Jobdogg">Details</a>
                  </div>
                </div>
              </div>
            {% endif %}
          {% empty %}
            <div class="col-lg-12">
              <div class="card bg-light text-primary font-weight-bold shadow border-left-danger">
                <div class="card-body py-2">
                  Oops!! Your company job requisition not yet created!!.
                  <div class="text-black-50 small py-2">
                    <a href="{% url 'employer:job_requisition_create' %}" class="btn btn-success">Create New Requisition</a>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

      <div class="tab-pane fade" id="tab-save">
        <!-- Content for SAVE tab -->
        <div class="row g-1">
          {% for jobrequisition in job_requisitions %}
            {% if jobrequisition.preference_action == 'SAVE'%}
              <div class="col-md-4 py-2">
                <div class="card border-left-JobdoggOrnge shadow h-100 ">
                  <div class="card-header">
                    {% for position in jobrequisition.job_title.all %}
                      {{ position.position }}
                    {% endfor %}
                  </div>
                  <div class="card-body">
                    <a href="{% url 'employer:job_requisition_detail' jobrequisition.slug %}" class="btn btn-sm btn-outline-Jobdogg">Details</a>
                  </div>
                </div>
              </div>
            {% endif %}
          {% empty %}
            <div class="col-lg-12">
              <div class="card bg-light text-primary font-weight-bold shadow border-left-danger">
                <div class="card-body py-2">
                  Oops!! Your company job requisition not yet created!!.
                  <div class="text-black-50 small py-2">
                    <a href="{% url 'employer:job_requisition_create' %}" class="btn btn-success">Create New Requisition</a>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

      <div class="tab-pane fade" id="tab-alert">
        <!-- Content for ALERT tab -->
        <div class="row g-1">
          {% for jobrequisition in job_requisitions %}
            {% if jobrequisition.preference_action == 'ALERT'%}
              <div class="col-md-4 py-2">
                <div class="card border-left-JobdoggOrnge shadow h-100 ">
                  <div class="card-header">
                    {% for position in jobrequisition.job_title.all %}
                      {{ position.position }}
                    {% endfor %}
                  </div>
                  <div class="card-body">
                    <a href="{% url 'employer:job_requisition_detail' jobrequisition.slug %}" class="btn btn-sm btn-outline-Jobdogg">Details</a>
                  </div>
                </div>
              </div>
            {% endif %}
          {% empty %}
            <div class="col-lg-12">
              <div class="card bg-light text-primary font-weight-bold shadow border-left-danger">
                <div class="card-body p">
                  Oops!! Your company job requisition not yet created!!.
                  <div class="text-black-50 small py-2">
                    <a href="{% url 'employer:job_requisition_create' %}" class="btn btn-success">Create New Requisition</a>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      
      <div class="tab-pane fade" id="tab-post">
        <!-- Content for POST tab -->
        <div class="row g-1">
          {% for jobrequisition in job_requisitions %}
            {% if jobrequisition.preference_action == 'POST' %}
              <div class="col-md-4 py-2">
                <div class="card border-left-JobdoggOrnge shadow h-100 ">
                  <div class="card-header">
                    {% for position in jobrequisition.job_title.all %}
                      {{ position.position }}
                    {% endfor %}
                  </div>
                  <div class="card-body">
                    <a href="{% url 'employer:job_requisition_detail' jobrequisition.slug %}" class="btn btn-sm btn-outline-Jobdogg">Details</a>
                  </div>
                </div>
              </div>
            {% endif %}
          {% empty %}
            <div class="col-lg-12">
              <div class="card bg-light text-primary font-weight-bold shadow border-left-danger">
                <div class="card-body py-2">
                  Oops!! Your company job requisition not yet created!!.
                  <div class="text-black-50 small py-2">
                    <a href="{% url 'employer:job_requisition_create' %}" class="btn btn-success">Create New Requisition</a>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <div class="mb-4">
    <div class="card bg-light text-primary font-weight-bold shadow border-left-danger">
      <div class="card-body p">
        Oops!! Your company job requisition not yet created!!.
        <div class="text-black-50 small py-2">
          <a href="{% url 'employer:job_requisition_create' %}" class="btn btn-success">Create New Requisition</a>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

{% endblock %}